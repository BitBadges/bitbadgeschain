syntax = "proto3";
package trevormil.bitbadgeschain.badges;

import "gogoproto/gogo.proto";
import "badges/params.proto";
import "badges/badges.proto";
import "badges/ranges.proto";
// this line is used by starport scaffolding # genesis/proto/import

option go_package = "github.com/trevormil/bitbadgeschain/x/badges/types";

//indexed by badgeid-subassetid-uniqueaccountnumber (26 bytes)
message BadgeBalanceInfo {
    repeated NumberRange idsForBalances = 1;
    repeated uint64 balances = 2;
    uint64 pending_nonce = 3;
    repeated PendingTransfer pending = 4; //IDs will be sorted in order of pending_nonce
    repeated Approval approvals = 5;
    uint64 user_flags= 6; //TODO: for (hidden on profile, pinned, etc)
}

message Approval {
    uint64 address = 1;
    repeated uint64 amounts = 2;
    repeated NumberRange subbadgeRanges = 3;
}

//Pending transfers will not be saved after accept / reject
message PendingTransfer {
    NumberRange subbadgeRange = 1;
    uint64 this_pending_nonce = 2;
    uint64 other_pending_nonce = 3;
    uint64 amount = 4;
    bool send_request = 5; //vs. receive request
    uint64 to = 6;
    uint64 from = 7;
    uint64 approved_by = 9;
}
