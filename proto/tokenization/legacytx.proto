syntax = "proto3";
package tokenization;

// this line is used by starport scaffolding # proto/tx/import
import "tokenization/transfers.proto";
import "tokenization/balances.proto";
import "tokenization/permissions.proto";
import "tokenization/metadata.proto";
import "tokenization/collections.proto";
import "gogoproto/gogo.proto";
import "tokenization/address_lists.proto";
import "tokenization/timelines.proto";
import "tokenization/tx.proto";
import "tokenization/approvals.proto";

option go_package = "github.com/bitbadges/bitbadgeschain/x/tokenization/types";

//Before switching to the universal Msgs, we had a separate Msg for each action.
//This is the old Msg service definition. It is still used in some parts of the codebase for compatibility.

//The types defined in these files are used to define the MsgServer types for all requests and responses for Msgs of the tokens module.
message UserOutgoingApprovalTimeline {
  repeated UserOutgoingApproval outgoingApprovals = 1;
  repeated UintRange timelineTimes = 2;
}

message UserIncomingApprovalTimeline {
  repeated UserIncomingApproval incomingApprovals = 1;
  repeated UintRange timelineTimes = 2;
}

message CollectionApprovalTimeline {
  repeated CollectionApproval collectionApprovals = 1;
  repeated UintRange timelineTimes = 2;
}


message MsgNewCollection {
  // See collections.proto for more details about these MsgNewBadge fields. Defines the token details. Leave unneeded fields empty.
  string creator = 1; 
  repeated CollectionMetadataTimeline collectionMetadataTimeline = 2;
  repeated TokenMetadataTimeline tokenMetadataTimeline = 3;
  repeated CustomDataTimeline customDataTimeline = 4;
  repeated CollectionApproval collectionApprovals = 5;
  CollectionPermissions permissions = 6;
  repeated StandardsTimeline standardsTimeline = 7;

  //Token supplys and amounts to create. For each idx, we create amounts[idx] badges each with a supply of supplys[idx].
  //If supply[idx] == 0, we assume default supply. amountsToCreate[idx] can't equal 0.
  repeated Balance tokensToCreate = 8;
  repeated Transfer transfers = 9;
  repeated ContractAddressTimeline contractAddressTimeline = 10;
  repeated AddressList addressLists = 11;

  repeated UserOutgoingApproval defaultOutgoingApprovals = 12; //The user's approved transfers for each token ID.
  repeated UserIncomingApproval defaultIncomingApprovals = 13; //The user's approved incoming transfers for each token ID.

  bool defaultDisapproveSelfInitiated = 14; 
   //The default balances for the user
  repeated Balance defaultBalances = 15;
  repeated CosmosCoinWrapperPathAddObject cosmosCoinWrapperPathsToAdd = 16;
  
  // Collection-level invariants that cannot be broken.
  // These are set upon genesis and cannot be modified.
  // Addresses are generated by the keeper and stored in the collection.
  InvariantsAddObject invariants = 17;
  repeated AliasPathAddObject aliasPathsToAdd = 18;
}

message MsgNewCollectionResponse {
  string collectionId = 1  [(gogoproto.customtype) = "Uint", (gogoproto.nullable) = false
  ]; //ID of created token collection
}

//This handles both minting more of existing tokens and creating new tokens.
message MsgMintAndDistributeTokens {
  string creator = 1;
  string collectionId = 2  [(gogoproto.customtype) = "Uint", (gogoproto.nullable) = false];
  repeated Balance tokensToCreate = 3;

  repeated Transfer transfers = 4;
  repeated CollectionMetadataTimeline collectionMetadataTimeline = 5; 
  repeated TokenMetadataTimeline tokenMetadataTimeline = 6;
  repeated CollectionApproval collectionApprovals = 7;

  repeated AddressList addressLists = 8;
}

message MsgMintAndDistributeTokensResponse {}

message MsgUniversalUpdateCollectionApprovals {
  string creator = 1;
  string collectionId = 2  [(gogoproto.customtype) = "Uint", (gogoproto.nullable) = false];
  repeated CollectionApproval collectionApprovals = 3;
  repeated AddressList addressLists = 4;
}


message MsgUniversalUpdateCollectionApprovalsResponse {}


//Update token Uris with new URI object, if permitted.
message MsgUpdateMetadata {
  string creator = 1;
  string collectionId = 2  [(gogoproto.customtype) = "Uint", (gogoproto.nullable) = false];
  repeated CollectionMetadataTimeline collectionMetadataTimeline = 3; 
  repeated TokenMetadataTimeline tokenMetadataTimeline = 4;
  repeated CustomDataTimeline customDataTimeline = 5;
  repeated ContractAddressTimeline contractAddressTimeline = 6;
  repeated StandardsTimeline standardsTimeline = 7;
}

message MsgUpdateMetadataResponse {}

//Update token permissions with new permissions, if permitted.
message MsgUniversalUpdateCollectionPermissions {
  string creator = 1;
  string collectionId = 2  [(gogoproto.customtype) = "Uint", (gogoproto.nullable) = false];
  CollectionPermissions permissions = 3;
  repeated AddressList addressLists = 4;
}

message MsgUniversalUpdateCollectionPermissionsResponse {}

message MsgUpdateUserPermissions {
  string creator = 1;
  string collectionId = 2  [(gogoproto.customtype) = "Uint", (gogoproto.nullable) = false];
  UserPermissions permissions = 3;
  repeated AddressList addressLists = 4;
}

message MsgUpdateUserPermissionsResponse {}

//Transfer manager to this address. Recipient must have made a request.
message MsgUpdateManager {
  string creator = 1;
  string collectionId = 2  [(gogoproto.customtype) = "Uint", (gogoproto.nullable) = false];
  repeated ManagerTimeline managerTimeline = 3;
}

message MsgUpdateManagerResponse {}


message MsgArchiveCollection {
  string creator      = 1;
  string collectionId = 2 [(gogoproto.customtype) = "Uint", (gogoproto.nullable) = false];
  repeated IsArchivedTimeline isArchivedTimeline = 3;
}

message MsgArchiveCollectionResponse {}


// this line is used by starport scaffolding # proto/tx/message
